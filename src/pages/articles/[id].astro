---
//dynamic route. The syntax [id] tells Astro to create a separate page for each article based on its unique identifier
import BaseLayout from "../../layouts/BaseLayout.astro";
import { articles } from "../../data/articles.js";

// get ID from URL
const { id } = Astro.params;

// Searching for an article by id
const article = articles.find(a => a.id.toString() === id);

// check determines whether the find() method returned a result. 404 error if not found
if (!article) {
  throw new Error("Article not found", { cause: { status: 404 } });
}
---

<BaseLayout>
  <article class="max-w-3xl mx-auto">
    <h1 class="text-4xl font-serif font-bold mb-4">{article.title}</h1>
    <p class="text-sm text-gray-500 mb-6">
      {article.date.toLocaleDateString("ru-RU")} Â· {article.category} <!-- displays the date and category of the article -->
    </p>
    <img 
      src={article.image} 
      alt={article.title} 
      class="w-full h-96 object-cover mb-6 rounded"
    />
    <p class="text-lg leading-relaxed text-gray-800">{article.excerpt}</p> <!-- displays excerpt -->
  </article>
</BaseLayout>